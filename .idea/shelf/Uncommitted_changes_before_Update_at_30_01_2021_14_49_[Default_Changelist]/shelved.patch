Index: app/src/main/java/com/example/walktoshop/User/UserStatistics.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.walktoshop.User;\r\n\r\nimport android.app.Activity;\r\nimport android.app.ActivityManager;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.NetworkInfo;\r\nimport android.os.Bundle;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.DragEvent;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.swiperefreshlayout.widget.SwipeRefreshLayout;\r\n\r\nimport com.example.walktoshop.NetworkController.NetworkController;\r\nimport com.example.walktoshop.R;\r\nimport com.github.mikephil.charting.charts.BarChart;\r\nimport com.github.mikephil.charting.components.XAxis;\r\nimport com.github.mikephil.charting.data.BarData;\r\nimport com.github.mikephil.charting.data.BarDataSet;\r\nimport com.github.mikephil.charting.data.BarEntry;\r\nimport com.github.mikephil.charting.formatter.IndexAxisValueFormatter;\r\nimport com.github.mikephil.charting.interfaces.datasets.IBarDataSet;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.text.DateFormat;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\n\r\npublic class UserStatistics extends AppCompatActivity {\r\n    FirebaseFirestore db =FirebaseFirestore.getInstance();\r\n    String UID;\r\n    BarChart barChart;\r\n    double latitude;\r\n    double longitude;\r\n    String city;\r\n    BottomNavigationView bottomNavigationView;\r\n    private ArrayList<BarEntry> dailySteps=new ArrayList<>();\r\n    private ArrayList<BarEntry> dailyKm=new ArrayList<>();\r\n    private ArrayList<BarEntry> dailyKcal= new ArrayList<>();\r\n    private ArrayList<String> days = new ArrayList<>();\r\n    private float stepsAverage = 0;\r\n    private float kcalAverage = 0;\r\n    private float kmAverage = 0;\r\n    private TextView stepsAverageText;\r\n    private TextView kcalAverageText;\r\n    private TextView kilometersAverageText;\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_user_statistics);\r\n        Intent intent = getIntent();\r\n        if (intent.hasExtra(\"UID\") && intent.hasExtra(\"city\") && intent.hasExtra(\"latitude\") && intent.hasExtra(\"longitude\")) {\r\n            UID = intent.getStringExtra(\"UID\");\r\n            city = intent.getStringExtra(\"city\");\r\n            latitude = intent.getDoubleExtra(\"latitude\", 0.0f);\r\n            longitude = intent.getDoubleExtra(\"longitude\", 0.0f);\r\n        }\r\n        barChart = findViewById(R.id.barChart);\r\n        stepsAverageText =findViewById(R.id.stepsAvg);\r\n        kcalAverageText= findViewById(R.id.kcalAvg);\r\n        kilometersAverageText=findViewById(R.id.kilometersAvg);\r\n        bottomNavigationView = (BottomNavigationView) findViewById(R.id.bottom_navigation);\r\n        bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                switch (item.getItemId()) {\r\n                    case R.id.action_home:\r\n                        goHome();\r\n                        break;\r\n                    case R.id.action_map:\r\n                        goToUserViewMap();\r\n                        break;\r\n                    case R.id.action_notification:\r\n                        break;\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        NetworkController networkController =new NetworkController();\r\n        if(!networkController.isConnected(UserStatistics.this)){\r\n            networkController.connectionDialog(UserStatistics.this);\r\n        }\r\n        Log.d(\"connection state\",networkController.isConnected(UserStatistics.this)+\"\");\r\n        getDailyWalk();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        killServiceIfRunning();\r\n    }\r\n    private void killServiceIfRunning(){\r\n        if(isMyServiceRunning(StepCounter.class) == true){\r\n            Intent intent =new Intent(this,StepCounter.class);\r\n            Toast.makeText(this,\"Contapassi disattivato\",Toast.LENGTH_SHORT).show();\r\n            stopService(intent);\r\n        }\r\n    }\r\n    private boolean isMyServiceRunning(Class<?> serviceClass) {\r\n        ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);\r\n        for (ActivityManager.RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {\r\n            if (serviceClass.getName().equals(service.service.getClassName())) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private void getDailyWalk(){\r\n        db.collection(\"utente\").document(UID).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if(task.isSuccessful()){\r\n                    DocumentSnapshot document= task.getResult();\r\n                    ArrayList<String> stringedWalks= (ArrayList<String>) document.get(\"walk\");\r\n                    int userHeight= Integer.parseInt(document.getString(\"height\"));\r\n                    int userWeight= Integer.parseInt(document.getString(\"weight\"));\r\n                    if(stringedWalks!=null){\r\n                        int numberOfUserWalks=0;\r\n                        int totalNumberOfUserWalks= stringedWalks.size()-1;\r\n                        for (int i=0;i<6;i++){\r\n                            if(totalNumberOfUserWalks-i>=0){\r\n                                String walkInfo=stringedWalks.get(totalNumberOfUserWalks-i);\r\n                                Walk walk= getWalkInfoFromString(walkInfo);\r\n                                UserStatistics.this.days.add(millisecondsToDate(walk.getDate()));\r\n                                long steps= Long.parseLong((walk.getNumberOfSteps()));\r\n                                float meters= calculateKilometers(userHeight,steps)*1000;//trasformare in metri per il grafico\r\n                                int kcal= calculateKcal(userWeight,steps);\r\n                                Log.d(\"index\",days.get(i)+\" \"+steps);\r\n                                stepsAverage= stepsAverage + steps;\r\n                                kcalAverage= kcalAverage + kcal;\r\n                                kmAverage =kmAverage + meters;\r\n                                UserStatistics.this.dailySteps.add(new BarEntry(i,steps));\r\n                                UserStatistics.this.dailyKm.add(new BarEntry(i,meters));\r\n                                UserStatistics.this.dailyKcal.add(new BarEntry(i,kcal));\r\n                                numberOfUserWalks++;\r\n                            }\r\n                        }\r\n                        stepsAverage=Math.round((float) stepsAverage/numberOfUserWalks);\r\n                        kcalAverage=Math.round((float) kcalAverage/numberOfUserWalks);\r\n                        kmAverage=(float) (kmAverage/numberOfUserWalks)/1000;//riporto in km\r\n                        String[] daysArray = new String[UserStatistics.this.days.size()];\r\n                        daysArray = UserStatistics.this.days.toArray(daysArray);\r\n                        setBarChart(dailyKm,dailyKcal,dailySteps,daysArray);\r\n                        //set medie\r\n                        stepsAverageText.setText(\"Media Passi:\"+(int) stepsAverage);\r\n                        kcalAverageText.setText(\"Media calorie:\"+(int) kcalAverage);\r\n                        kilometersAverageText.setText(\"Media kilometri:\"+(int) kmAverage);\r\n\r\n                        Log.d(\"average\",\"walks\"+numberOfUserWalks+\"steps\"+ stepsAverage +\"kcal\"+kcalAverage+\"km\"+kmAverage);\r\n\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void goHome() {\r\n        final Intent intent = new Intent(this, UserView.class);\r\n        User user = new User();\r\n        intent.putExtra(\"UID\", UID);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void goToUserViewMap() {\r\n        final Intent intent = new Intent(UserStatistics.this, UserMapView.class);\r\n        intent.putExtra(\"UID\", UID);\r\n        intent.putExtra(\"city\",city);\r\n        intent.putExtra(\"latitude\",latitude);\r\n        intent.putExtra(\"longitude\",longitude);\r\n        startActivity(intent);\r\n    }\r\n    private void setBarChart(ArrayList<BarEntry> dailyKm,ArrayList<BarEntry> dailyKcal,ArrayList<BarEntry> dailySteps, String[] days){\r\n        BarDataSet steps = new BarDataSet(dailySteps,\"Passi giornalieri\");\r\n        steps.setColor(Color.RED);\r\n        BarDataSet kcal = new BarDataSet(dailyKcal,\"Kcal giornaliere\");\r\n        kcal.setColor(Color.GREEN);\r\n        BarDataSet km = new BarDataSet(dailyKm,\"Metri giornalieri\");\r\n        km.setColor(Color.MAGENTA);\r\n\r\n        BarData data = new BarData(steps,kcal,km);\r\n        barChart.setData(data);\r\n\r\n        XAxis xAxis = barChart.getXAxis();\r\n        xAxis.setValueFormatter(new IndexAxisValueFormatter(days));\r\n        xAxis.setCenterAxisLabels(true);\r\n        xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);\r\n        xAxis.setGranularity(1);\r\n        xAxis.setGranularityEnabled(true);\r\n\r\n        barChart.setDragEnabled(true);\r\n        barChart.setVisibleXRangeMaximum(1);\r\n\r\n        float barSpace = 0.12f;\r\n        float groupSpace = 0.16f;\r\n        data.setBarWidth(0.16f);\r\n\r\n        barChart.getXAxis().setAxisMinimum(0);\r\n        barChart.getXAxis().setAxisMaximum(0+barChart.getBarData().getGroupWidth(groupSpace, barSpace)*7);\r\n        barChart.getAxisLeft().setAxisMinimum(0);\r\n\r\n        barChart.groupBars(0, groupSpace, barSpace);\r\n        barChart.invalidate();\r\n    }\r\n    private Walk getWalkInfoFromString(String info){\r\n        String[] todayAndSteps =info.split(\",\");\r\n        Walk walk =new Walk();\r\n        walk.setDate(todayAndSteps[0]);\r\n        walk.setNumberOfSteps(todayAndSteps[1]);\r\n        return walk;\r\n    }\r\n    private float calculateKilometers(int height,long steps){\r\n        float meters;\r\n        if(height<170){\r\n            meters=Math.round((float)600*steps/1000);\r\n        }else{\r\n            meters=Math.round((float)700*steps/1000);\r\n        }\r\n        float kilometers=meters/1000;\r\n        Log.d(\"km\",kilometers+\"\");\r\n        return kilometers;\r\n    }\r\n    private int calculateKcal(int weight,long steps){\r\n        int kcal;\r\n        Log.d(\"weight\",weight+\"\");\r\n        kcal= (int) Math.round((float)weight*0.0005*steps);\r\n        Log.d(\"kcal\",kcal+\"\");\r\n        return kcal;\r\n    }\r\n    private String millisecondsToDate(String milliseconds){\r\n        if(milliseconds!=null){\r\n            DateFormat formatter = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n            long longMilliSeconds= Long.parseLong(milliseconds);\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.setTimeInMillis(longMilliSeconds);\r\n            return formatter.format(calendar.getTime());\r\n        }\r\n        return \"\";\r\n    }\r\n    //check\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/walktoshop/User/UserStatistics.java	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/java/com/example/walktoshop/User/UserStatistics.java	(date 1612014352905)
@@ -1,59 +1,55 @@
 package com.example.walktoshop.User;
 
-import android.app.Activity;
 import android.app.ActivityManager;
-import android.app.AlertDialog;
 import android.content.Context;
-import android.content.DialogInterface;
 import android.content.Intent;
 import android.graphics.Color;
-import android.net.ConnectivityManager;
-import android.net.NetworkInfo;
 import android.os.Bundle;
-import android.provider.Settings;
 import android.util.Log;
-import android.view.DragEvent;
 import android.view.MenuItem;
-import android.view.View;
 import android.widget.TextView;
 import android.widget.Toast;
-
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.appcompat.app.AppCompatActivity;
-import androidx.swiperefreshlayout.widget.SwipeRefreshLayout;
-
 import com.example.walktoshop.NetworkController.NetworkController;
 import com.example.walktoshop.R;
 import com.github.mikephil.charting.charts.BarChart;
+import com.github.mikephil.charting.charts.PieChart;
 import com.github.mikephil.charting.components.XAxis;
 import com.github.mikephil.charting.data.BarData;
 import com.github.mikephil.charting.data.BarDataSet;
 import com.github.mikephil.charting.data.BarEntry;
+import com.github.mikephil.charting.data.PieData;
+import com.github.mikephil.charting.data.PieDataSet;
+import com.github.mikephil.charting.data.PieEntry;
 import com.github.mikephil.charting.formatter.IndexAxisValueFormatter;
-import com.github.mikephil.charting.interfaces.datasets.IBarDataSet;
+import com.github.mikephil.charting.utils.ColorTemplate;
 import com.google.android.gms.tasks.OnCompleteListener;
 import com.google.android.gms.tasks.Task;
 import com.google.android.material.bottomnavigation.BottomNavigationView;
 import com.google.firebase.firestore.DocumentSnapshot;
 import com.google.firebase.firestore.FirebaseFirestore;
-
 import java.text.DateFormat;
 import java.text.SimpleDateFormat;
 import java.util.ArrayList;
 import java.util.Calendar;
 
+import static com.github.mikephil.charting.utils.ColorTemplate.MATERIAL_COLORS;
+
 public class UserStatistics extends AppCompatActivity {
     FirebaseFirestore db =FirebaseFirestore.getInstance();
     String UID;
     BarChart barChart;
+    BarChart kcalBarChart;
+    BarChart kmBarChart;
     double latitude;
     double longitude;
     String city;
     BottomNavigationView bottomNavigationView;
     private ArrayList<BarEntry> dailySteps=new ArrayList<>();
     private ArrayList<BarEntry> dailyKm=new ArrayList<>();
-    private ArrayList<BarEntry> dailyKcal= new ArrayList<>();
+    private ArrayList<BarEntry> dailyKcal= new ArrayList<BarEntry>();
     private ArrayList<String> days = new ArrayList<>();
     private float stepsAverage = 0;
     private float kcalAverage = 0;
@@ -73,9 +69,11 @@
             longitude = intent.getDoubleExtra("longitude", 0.0f);
         }
         barChart = findViewById(R.id.barChart);
-        stepsAverageText =findViewById(R.id.stepsAvg);
-        kcalAverageText= findViewById(R.id.kcalAvg);
-        kilometersAverageText=findViewById(R.id.kilometersAvg);
+        kcalBarChart = findViewById(R.id.barChartKcal);
+        kmBarChart = findViewById(R.id.barChartKm);
+        //stepsAverageText =findViewById(R.id.stepsAvg);
+       // kcalAverageText= findViewById(R.id.kcalAvg);
+        //kilometersAverageText=findViewById(R.id.kilometersAvg);
         bottomNavigationView = (BottomNavigationView) findViewById(R.id.bottom_navigation);
         bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {
             @Override
@@ -87,8 +85,6 @@
                     case R.id.action_map:
                         goToUserViewMap();
                         break;
-                    case R.id.action_notification:
-                        break;
                 }
                 return true;
             }
@@ -166,9 +162,9 @@
                         daysArray = UserStatistics.this.days.toArray(daysArray);
                         setBarChart(dailyKm,dailyKcal,dailySteps,daysArray);
                         //set medie
-                        stepsAverageText.setText("Media Passi:"+(int) stepsAverage);
-                        kcalAverageText.setText("Media calorie:"+(int) kcalAverage);
-                        kilometersAverageText.setText("Media kilometri:"+(int) kmAverage);
+                        //stepsAverageText.setText("Media Passi:"+(int) stepsAverage);
+                        //kcalAverageText.setText("Media calorie:"+(int) kcalAverage);
+                        //kilometersAverageText.setText("Media kilometri:"+(int) kmAverage);
 
                         Log.d("average","walks"+numberOfUserWalks+"steps"+ stepsAverage +"kcal"+kcalAverage+"km"+kmAverage);
 
@@ -193,37 +189,55 @@
         intent.putExtra("longitude",longitude);
         startActivity(intent);
     }
-    private void setBarChart(ArrayList<BarEntry> dailyKm,ArrayList<BarEntry> dailyKcal,ArrayList<BarEntry> dailySteps, String[] days){
+    private void setBarChart(ArrayList<BarEntry> dailyKm, ArrayList<BarEntry> dailyKcal, ArrayList<BarEntry> dailySteps, String[] days){
+
         BarDataSet steps = new BarDataSet(dailySteps,"Passi giornalieri");
-        steps.setColor(Color.RED);
+        steps.setColors(MATERIAL_COLORS);
+        steps.setValueTextColor(Color.BLACK);
+        steps.setValueTextSize(12f);
+
         BarDataSet kcal = new BarDataSet(dailyKcal,"Kcal giornaliere");
-        kcal.setColor(Color.GREEN);
+        kcal.setColors(ColorTemplate.MATERIAL_COLORS);
+        kcal.setValueTextColor(Color.BLACK);
+        kcal.setValueTextSize(12f);
+
         BarDataSet km = new BarDataSet(dailyKm,"Metri giornalieri");
-        km.setColor(Color.MAGENTA);
+        km.setColors(ColorTemplate.MATERIAL_COLORS);
+        km.setValueTextColor(Color.BLACK);
+        km.setValueTextSize(12f);
 
-        BarData data = new BarData(steps,kcal,km);
+        BarData barDataKcal = new BarData(kcal);
+        kcalBarChart.setData(barDataKcal);
+        kcalBarChart.animate();
+        XAxis xAxisKcal = kcalBarChart.getXAxis();
+        xAxisKcal.setValueFormatter(new IndexAxisValueFormatter(days));
+        xAxisKcal.setPosition(XAxis.XAxisPosition.BOTTOM);
+        xAxisKcal.setGranularity(1);
+        xAxisKcal.setGranularityEnabled(true);
+        kcalBarChart.setDragEnabled(true);
+        kcalBarChart.invalidate();
+
+        BarData data = new BarData(steps);
         barChart.setData(data);
-
+        kcalBarChart.animate();
         XAxis xAxis = barChart.getXAxis();
         xAxis.setValueFormatter(new IndexAxisValueFormatter(days));
-        xAxis.setCenterAxisLabels(true);
         xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);
         xAxis.setGranularity(1);
         xAxis.setGranularityEnabled(true);
-
         barChart.setDragEnabled(true);
-        barChart.setVisibleXRangeMaximum(1);
-
-        float barSpace = 0.12f;
-        float groupSpace = 0.16f;
-        data.setBarWidth(0.16f);
-
-        barChart.getXAxis().setAxisMinimum(0);
-        barChart.getXAxis().setAxisMaximum(0+barChart.getBarData().getGroupWidth(groupSpace, barSpace)*7);
-        barChart.getAxisLeft().setAxisMinimum(0);
-
-        barChart.groupBars(0, groupSpace, barSpace);
         barChart.invalidate();
+
+        BarData barDataKm = new BarData(km);
+        kmBarChart.setData(barDataKm);
+        kmBarChart.animate();
+        XAxis xAxisKm = kmBarChart.getXAxis();
+        xAxisKm.setValueFormatter(new IndexAxisValueFormatter(days));
+        xAxisKm.setPosition(XAxis.XAxisPosition.BOTTOM);
+        xAxisKm.setGranularity(1);
+        xAxisKm.setGranularityEnabled(true);
+        kmBarChart.setDragEnabled(true);
+        kmBarChart.invalidate();
     }
     private Walk getWalkInfoFromString(String info){
         String[] todayAndSteps =info.split(",");
Index: app/src/main/java/com/example/walktoshop/User/UserMapView.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.walktoshop.User;\r\n\r\nimport android.Manifest;\r\nimport android.app.ActivityManager;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.Configuration;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.ListView;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport com.example.walktoshop.NetworkController.NetworkController;\r\nimport com.example.walktoshop.R;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.location.LocationServices;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.Marker;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.libraries.places.api.model.Place;\r\nimport com.google.android.libraries.places.api.net.PlacesClient;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\n\r\npublic class UserMapView extends AppCompatActivity implements GoogleMap.OnMarkerClickListener,OnMapReadyCallback {\r\n    GoogleMap mMap;\r\n    ProgressBar progressBar;\r\n    List<LatLng> latLngs = new ArrayList<LatLng>();\r\n    LocationManager service;\r\n    LocationListener locationListener;\r\n    double latitude;\r\n    double longitude;\r\n    String city;\r\n    String UID;\r\n    FusedLocationProviderClient fusedLocationClient;\r\n    SupportMapFragment mapFragment;\r\n    FirebaseFirestore db =FirebaseFirestore.getInstance();\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_user_map_view);\r\n        progressBar = (ProgressBar) findViewById(R.id.userMapViewProgressBar);\r\n        progressBar.setProgress(View.VISIBLE);\r\n\r\n        mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.map);\r\n\r\n        Toast.makeText(UserMapView.this,\"Apertura mappa in corso\", Toast.LENGTH_LONG).show();\r\n\r\n        Intent intent = getIntent();\r\n        if (intent.hasExtra(\"UID\") && intent.hasExtra(\"city\") && intent.hasExtra(\"latitude\") && intent.hasExtra(\"longitude\")) {\r\n            UID = intent.getStringExtra(\"UID\");\r\n            city=intent.getStringExtra(\"city\");\r\n            latitude= intent.getDoubleExtra(\"latitude\",0.0f);\r\n            longitude= intent.getDoubleExtra(\"longitude\",0.0f);\r\n            //Log.d(\"city\",latitude+city +longitude);\r\n            db.collection(\"attivita\").whereEqualTo(\"locality\", city).get().addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                @Override\r\n                public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                    if(task.isSuccessful()){\r\n                        for (QueryDocumentSnapshot document : task.getResult()){\r\n                            double lat = Double.parseDouble(document.getString(\"latitude\"));\r\n                            double longt = Double.parseDouble(document.getString(\"longitude\"));\r\n                            latLngs.add(new LatLng(lat, longt));\r\n                        }\r\n                    }\r\n                    mapFragment.getMapAsync(UserMapView.this);\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n        BottomNavigationView bottomNavigationView = (BottomNavigationView) findViewById(R.id.bottom_navigation);\r\n        bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                switch (item.getItemId()) {\r\n                    case R.id.action_home:\r\n                        goHome();\r\n                        break;\r\n                    case R.id.action_statistics:\r\n                        goUserStatistics();\r\n                        break;\r\n                    case R.id.action_notification:\r\n                        break;\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        NetworkController networkController =new NetworkController();\r\n        if(!networkController.isConnected(UserMapView.this)){\r\n            networkController.connectionDialog(UserMapView.this);\r\n        }\r\n    }\r\n\r\n\r\n    private void goUserStatistics() {\r\n        final Intent intent = new Intent(this, UserStatistics.class);\r\n        User user = new User();\r\n        intent.putExtra(\"UID\", UID);\r\n        intent.putExtra(\"city\",city);\r\n        intent.putExtra(\"latitude\",latitude);\r\n        intent.putExtra(\"longitude\",longitude);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void goHome() {\r\n        final Intent intent = new Intent(this, UserView.class);\r\n        User user = new User();\r\n        intent.putExtra(\"UID\", UID);\r\n        startActivity(intent);\r\n    }\r\n\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.menu_action_bar, menu);\r\n        return true;\r\n    }\r\n\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n    public void OnItemSelected(MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.action_exit:\r\n                break;\r\n            case R.id.action_settings:\r\n                break;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n        progressBar.setVisibility(View.GONE);\r\n        mMap = googleMap;\r\n        Iterator<LatLng> iterator = latLngs.listIterator();\r\n        while(iterator.hasNext()){\r\n            mMap.addMarker(new MarkerOptions().position(iterator.next()));\r\n        }\r\n        LatLng myPlace = new LatLng(latitude, longitude);\r\n        //mMap.addMarker(new MarkerOptions().position(italy).title(\"I'm here\"));\r\n        // mMap.moveCamera(CameraUpdateFactory.newLatLng(italy));\r\n        mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(myPlace, 10));\r\n        mMap.setOnMarkerClickListener(this);\r\n\r\n    }\r\n\r\n    @Override\r\n    public boolean onMarkerClick(Marker marker) {\r\n        LatLng position= marker.getPosition();\r\n        double latitude= position.latitude;\r\n        double longitude= position.longitude;\r\n        FragmentUserMapBackDrop fragment=new FragmentUserMapBackDrop();\r\n        Bundle bundle=new Bundle();\r\n        String businessUID=calculateMyBusinessCustomUID(latitude,longitude);\r\n        bundle.putString(\"businessUID\",businessUID);\r\n        bundle.putString(\"UID\",UID);\r\n        fragment.setArguments(bundle);\r\n        getSupportFragmentManager().beginTransaction()\r\n                .add(R.id.coordinator, fragment).commit();\r\n        return false;\r\n    }\r\n    private String calculateMyBusinessCustomUID(Double latitude,Double longitude){\r\n        if(latitude!=null && longitude!=null){\r\n            String customUID=null;\r\n            customUID= String.valueOf(latitude+longitude);\r\n            customUID =customUID.replaceAll(\"[^0-9]\", \"\");\r\n            return customUID;\r\n        }else{\r\n            return null;\r\n        }\r\n    }\r\n    //killa il service se attivo\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        killServiceIfRunning();\r\n    }\r\n    private boolean isMyServiceRunning(Class<?> serviceClass) {\r\n        ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);\r\n        for (ActivityManager.RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {\r\n            if (serviceClass.getName().equals(service.service.getClassName())) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    private void killServiceIfRunning(){\r\n        if(isMyServiceRunning(StepCounter.class) == true){\r\n            Intent intent =new Intent(this,StepCounter.class);\r\n            Toast.makeText(this,\"Contapassi disattivato\",Toast.LENGTH_SHORT).show();\r\n            stopService(intent);\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/walktoshop/User/UserMapView.java	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/java/com/example/walktoshop/User/UserMapView.java	(date 1612014344325)
@@ -1,38 +1,22 @@
 package com.example.walktoshop.User;
 
-import android.Manifest;
 import android.app.ActivityManager;
-import android.app.AlertDialog;
 import android.content.Context;
-import android.content.DialogInterface;
 import android.content.Intent;
-import android.content.pm.PackageManager;
-import android.content.res.Configuration;
-import android.location.Address;
-import android.location.Geocoder;
-import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
-import android.os.Build;
 import android.os.Bundle;
-import android.provider.Settings;
-import android.util.Log;
 import android.view.Menu;
 import android.view.MenuItem;
 import android.view.View;
-import android.widget.ListView;
 import android.widget.ProgressBar;
 import android.widget.Toast;
-
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.appcompat.app.AppCompatActivity;
-import androidx.core.app.ActivityCompat;
-
 import com.example.walktoshop.NetworkController.NetworkController;
 import com.example.walktoshop.R;
 import com.google.android.gms.location.FusedLocationProviderClient;
-import com.google.android.gms.location.LocationServices;
 import com.google.android.gms.maps.CameraUpdateFactory;
 import com.google.android.gms.maps.GoogleMap;
 import com.google.android.gms.maps.OnMapReadyCallback;
@@ -41,20 +25,14 @@
 import com.google.android.gms.maps.model.Marker;
 import com.google.android.gms.maps.model.MarkerOptions;
 import com.google.android.gms.tasks.OnCompleteListener;
-import com.google.android.gms.tasks.OnSuccessListener;
 import com.google.android.gms.tasks.Task;
-import com.google.android.libraries.places.api.model.Place;
-import com.google.android.libraries.places.api.net.PlacesClient;
 import com.google.android.material.bottomnavigation.BottomNavigationView;
 import com.google.firebase.firestore.FirebaseFirestore;
 import com.google.firebase.firestore.QueryDocumentSnapshot;
 import com.google.firebase.firestore.QuerySnapshot;
-
-import java.io.IOException;
 import java.util.ArrayList;
 import java.util.Iterator;
 import java.util.List;
-import java.util.Locale;
 
 
 public class UserMapView extends AppCompatActivity implements GoogleMap.OnMarkerClickListener,OnMapReadyCallback {
@@ -105,8 +83,6 @@
             });
         }
 
-
-
         BottomNavigationView bottomNavigationView = (BottomNavigationView) findViewById(R.id.bottom_navigation);
         bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {
             @Override
@@ -118,8 +94,6 @@
                     case R.id.action_statistics:
                         goUserStatistics();
                         break;
-                    case R.id.action_notification:
-                        break;
                 }
                 return true;
             }
@@ -184,7 +158,6 @@
         // mMap.moveCamera(CameraUpdateFactory.newLatLng(italy));
         mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(myPlace, 10));
         mMap.setOnMarkerClickListener(this);
-
     }
 
     @Override
Index: app/src/main/java/com/example/walktoshop/User/UserView.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.walktoshop.User;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport android.Manifest;\r\nimport android.app.ActivityManager;\r\nimport android.app.AlertDialog;\r\nimport android.app.NotificationChannel;\r\nimport android.app.NotificationManager;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\nimport com.example.walktoshop.Login_SignUp.LogIn;\r\nimport com.example.walktoshop.NetworkController.NetworkController;\r\nimport com.example.walktoshop.R;\r\nimport com.example.walktoshop.Seller.Discount;\r\nimport com.example.walktoshop.Seller.SellerViewAdapter;\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.location.LocationServices;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\n\r\n\r\npublic class UserView extends AppCompatActivity {\r\n    FirebaseFirestore db =FirebaseFirestore.getInstance();\r\n    private TextView alert;\r\n    private ListView homeListview;\r\n    private static final String CHANNEL_ID=\"StepCounter_notification_channel\";\r\n    private String userUID=null;\r\n    double latitude=0;\r\n    double longitude=0;\r\n    String city=null;\r\n    LocationManager service;\r\n    LocationListener locationListener;\r\n    FusedLocationProviderClient fusedLocationClient;\r\n    private ArrayList<Discount> myDiscounts= new ArrayList<>();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_user_view);\r\n        fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\r\n        alert=findViewById(R.id.alert);\r\n        alert.setVisibility(View.GONE);\r\n        homeListview= findViewById(R.id.homeListView);\r\n        //setting del channel per quando partir√† il service\r\n        localizeUser();\r\n        createNotificationChannel();\r\n\r\n        BottomNavigationView bottomNavigationView = (BottomNavigationView) findViewById(R.id.bottom_navigation);\r\n        bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                switch (item.getItemId()) {\r\n                    case R.id.action_map:\r\n                        if(city==null || latitude==0 || longitude==0){\r\n                            Toast.makeText(UserView.this,\"Rilevamento della posizione in corso\",Toast.LENGTH_SHORT).show();\r\n                            askGPSpermission();\r\n                        }else{\r\n                            goToUserViewMap();\r\n                        }\r\n                        break;\r\n                    case R.id.action_statistics:\r\n                        goUserStatistics();\r\n                        break;\r\n                    case R.id.action_notification:\r\n                        break;\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n        Intent intent =getIntent();\r\n        if(intent.hasExtra(\"UID\")){\r\n            this.userUID = intent.getStringExtra(\"UID\");\r\n        }\r\n    }\r\n    private void localizeUser(){\r\n        if(ActivityCompat.checkSelfPermission(UserView.this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Task<Location> task = fusedLocationClient.getLastLocation();\r\n            task.addOnSuccessListener(new OnSuccessListener<Location>() {\r\n                @Override\r\n                public void onSuccess(Location location) {\r\n                    if(location != null){\r\n                        longitude = location.getLongitude();\r\n                        latitude = location.getLatitude();\r\n                        Log.d(\"longlat\",longitude+\"-\"+latitude);\r\n                        Geocoder geocoder=new Geocoder(UserView.this);\r\n                        List<Address> addresses=new ArrayList<>();\r\n                        try {\r\n                            addresses=geocoder.getFromLocation(latitude,longitude,1);\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        city=addresses.get(0).getLocality();\r\n                        Log.d(\"city\",city);\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n\r\n            ActivityCompat.requestPermissions(UserView.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 44);\r\n        }\r\n    }\r\n\r\n    private void goUserStatistics() {\r\n        final Intent intent = new Intent(UserView.this, UserStatistics.class);\r\n        intent.putExtra(\"UID\", this.userUID);\r\n        intent.putExtra(\"city\",city);\r\n        intent.putExtra(\"latitude\",latitude);\r\n        intent.putExtra(\"longitude\",longitude);\r\n        startActivity(intent);\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        NetworkController networkController =new NetworkController();\r\n        if(!networkController.isConnected(UserView.this)){\r\n            networkController.connectionDialog(UserView.this);\r\n        }\r\n        getUserDiscounts();\r\n    }\r\n\r\n    private void getUserDiscounts(){\r\n        db.collection(\"utente\").document(userUID).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if(task.isSuccessful()){\r\n                    DocumentSnapshot document= task.getResult();\r\n                    ArrayList<String> discountUID = (ArrayList) document.get(\"discountUID\");\r\n                    if(discountUID!=null){\r\n                        getMyDiscounts(discountUID);\r\n                    }else  if(discountUID==null){\r\n                        alert.setVisibility(View.VISIBLE);\r\n                        alert.setText(\"Nessuno sconto attivato\");\r\n                    }else if(discountUID.isEmpty()){\r\n                        alert.setVisibility(View.VISIBLE);\r\n                        alert.setText(\"Nessuno sconto attivato\");\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    private void getMyDiscounts(ArrayList discountUID){\r\n        if(!discountUID.isEmpty()){\r\n            Iterator it =discountUID.iterator();\r\n            while(it.hasNext()){\r\n                String uid= (String) it.next();\r\n                myDiscounts.clear();\r\n                db.collection(\"sconti\").document(uid).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                        if(task.isSuccessful()){\r\n                            DocumentSnapshot document= task.getResult();\r\n                            Discount discount=new Discount();\r\n                            discount.setUID(document.getString(\"uid\"));\r\n                            discount.setExpiringDate(document.getString(\"expiringDate\"));\r\n                            discount.setBusinessUID(document.getString(\"businessUID\"));\r\n                            discount.setDiscountsQuantity(document.getString(\"discountsQuantity\"));\r\n                            discount.setStartDiscountDate(document.getString(\"startDiscountDate\"));\r\n                            discount.setState(document.getString(\"state\"));\r\n                            discount.setDescription(document.getString(\"description\"));\r\n                            discount.setStepNumber(document.getString(\"stepNumber\"));\r\n                            myDiscounts.add(discount);\r\n                        }\r\n                    }\r\n                }).addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                        final SellerViewAdapter adapter=new SellerViewAdapter(UserView.this,myDiscounts, userUID,null,\"userHome\");\r\n                        homeListview.setAdapter(adapter);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    private void goToUserViewMap() {\r\n        final Intent intent = new Intent(UserView.this, UserMapView.class);\r\n        intent.putExtra(\"UID\", this.userUID);\r\n        intent.putExtra(\"city\",city);\r\n        intent.putExtra(\"latitude\",latitude);\r\n        intent.putExtra(\"longitude\",longitude);\r\n        startActivity(intent);\r\n    }\r\n\r\n    public boolean onCreateOptionsMenu(Menu menu){\r\n        getMenuInflater().inflate(R.menu.menu_action_bar, menu);\r\n        return true;\r\n    }\r\n\r\n    public boolean onOptionsItemSelected(MenuItem item){\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n    private  void startStepCounter(){\r\n        if(userUID!=null  ){\r\n            Intent intent =new Intent(this,StepCounter.class);\r\n            if(isMyServiceRunning(StepCounter.class) == false){\r\n                Toast.makeText(this,\"Contapassi attivato\",Toast.LENGTH_SHORT).show();\r\n                intent.putExtra(\"UID\",userUID);\r\n                startService(intent);\r\n            }else{\r\n                Toast.makeText(this,\"Contapassi disattivato\",Toast.LENGTH_SHORT).show();\r\n                stopService(intent);\r\n            }\r\n        }\r\n    }\r\n    public void OnItemSelected(MenuItem item) {\r\n        switch (item.getItemId()){\r\n            case R.id.stepcounter:\r\n                startStepCounter();\r\n                break;\r\n            case R.id.action_exit:\r\n                logOut();\r\n                break;\r\n            case R.id.action_settings:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void logOut(){\r\n        FirebaseAuth.getInstance().signOut();\r\n        final Intent intent = new Intent(this, LogIn.class);\r\n        startActivity(intent);\r\n        finish();\r\n    }\r\n    private void createNotificationChannel(){\r\n        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.O) {\r\n            NotificationChannel serviceChannel = new NotificationChannel(\r\n                    CHANNEL_ID,\r\n                    \"StepCounter_notification_channel\",\r\n                    NotificationManager.IMPORTANCE_DEFAULT);\r\n            NotificationManager manager =getSystemService(NotificationManager.class);\r\n            manager.createNotificationChannel(serviceChannel);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        killServiceIfRunning();\r\n    }\r\n    private void killServiceIfRunning(){\r\n        if(isMyServiceRunning(StepCounter.class) == true){\r\n            Intent intent =new Intent(this,StepCounter.class);\r\n            Toast.makeText(this,\"Contapassi disattivato\",Toast.LENGTH_SHORT).show();\r\n            stopService(intent);\r\n        }\r\n    }\r\n    private boolean isMyServiceRunning(Class<?> serviceClass) {\r\n        ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);\r\n        for (ActivityManager.RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {\r\n            if (serviceClass.getName().equals(service.service.getClassName())) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        if(requestCode == 44){\r\n            if(grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n\r\n            }\r\n        }else if(requestCode==10){\r\n            if(grantResults.length>0 && grantResults[0]==PackageManager.PERMISSION_GRANTED){\r\n            }else if(grantResults[0]==PackageManager.PERMISSION_DENIED){\r\n                if(ActivityCompat.shouldShowRequestPermissionRationale(UserView.this,Manifest.permission.ACCESS_FINE_LOCATION)){\r\n                    //dialog in cui spiego\r\n                    new AlertDialog.Builder(UserView.this)\r\n                            .setTitle(\"Permission\")\r\n                            .setMessage(\"Denying permission you can't use geo-localization\")\r\n                            .setNeutralButton(\"ok\",null)\r\n                            .show();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    //debug mode\r\n    private void getUserPosition() {\r\n        service = (LocationManager) getSystemService(LOCATION_SERVICE);\r\n        locationListener = new LocationListener() {\r\n            @Override\r\n            public void onLocationChanged(@NonNull Location location) {\r\n                latitude=location.getLatitude();\r\n                longitude=location.getLongitude();\r\n                Log.d(\"coordinates\",latitude+\"\\n\"+longitude);\r\n                try {\r\n                    Geocoder geocoder=new Geocoder(UserView.this);\r\n                    List<Address> addresses=new ArrayList<>();\r\n                    addresses=geocoder.getFromLocation(latitude,longitude,1);\r\n                    String country=addresses.get(0).getCountryName();\r\n                    city=addresses.get(0).getLocality();\r\n                    goToUserViewMap();\r\n                    //Log.d(\"city\",city);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onProviderEnabled(@NonNull String provider) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onProviderDisabled(@NonNull String provider) {\r\n                new AlertDialog.Builder(UserView.this).setTitle(\"GPS dialog\").setMessage(\"Do you want to turn on gps?\")\r\n                        .setPositiveButton(\"Yes\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialogInterface, int i) {\r\n                                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\r\n                                startActivity(intent);\r\n                            }\r\n                        }).setNegativeButton(\"Go Back\", null).show();\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    private void askGPSpermission() {\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\r\n                requestPermissions(new String[]{Manifest.permission.ACCESS_FINE_LOCATION,Manifest.permission.ACCESS_COARSE_LOCATION,Manifest.permission.INTERNET},10);\r\n            }\r\n            return;\r\n        }\r\n        getUserPosition();\r\n        service.requestLocationUpdates(\"gps\", 500, 1000, locationListener);\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/walktoshop/User/UserView.java	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/java/com/example/walktoshop/User/UserView.java	(date 1612014361319)
@@ -24,7 +24,6 @@
 import android.view.Menu;
 import android.view.MenuItem;
 import android.view.View;
-import android.widget.ImageView;
 import android.widget.ListView;
 import android.widget.TextView;
 import android.widget.Toast;
@@ -35,11 +34,6 @@
 import com.example.walktoshop.Seller.SellerViewAdapter;
 import com.google.android.gms.location.FusedLocationProviderClient;
 import com.google.android.gms.location.LocationServices;
-import com.google.android.gms.maps.CameraUpdateFactory;
-import com.google.android.gms.maps.GoogleMap;
-import com.google.android.gms.maps.OnMapReadyCallback;
-import com.google.android.gms.maps.model.LatLng;
-import com.google.android.gms.maps.model.MarkerOptions;
 import com.google.android.gms.tasks.OnCompleteListener;
 import com.google.android.gms.tasks.OnSuccessListener;
 import com.google.android.gms.tasks.Task;
@@ -47,7 +41,6 @@
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.firestore.DocumentSnapshot;
 import com.google.firebase.firestore.FirebaseFirestore;
-
 import java.io.IOException;
 import java.util.ArrayList;
 import java.util.Iterator;
@@ -96,8 +89,6 @@
                     case R.id.action_statistics:
                         goUserStatistics();
                         break;
-                    case R.id.action_notification:
-                        break;
                 }
                 return true;
             }
Index: app/src/main/res/menu/menu_bottom_navigation_view.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <item\r\n        android:id=\"@+id/action_home\"\r\n        android:enabled=\"true\"\r\n        android:title=\"@string/action_home\"\r\n        android:icon=\"@drawable/ic_home\"/>\r\n    <item\r\n        android:id=\"@+id/action_map\"\r\n        android:enabled=\"true\"\r\n        android:title=\"@string/action_map\"\r\n        android:icon=\"@android:drawable/ic_menu_mapmode\"/>\r\n\r\n    <item\r\n        android:id=\"@+id/action_statistics\"\r\n        android:enabled=\"true\"\r\n        android:title=\"@string/action_statistics\"\r\n        android:icon=\"@drawable/ic_grafico\"/>\r\n    <item\r\n        android:id=\"@+id/action_my_disocunt\"\r\n        android:enabled=\"true\"\r\n        android:title=\"@string/action_discount\"\r\n        android:visible=\"false\"\r\n        android:icon=\"@drawable/ic_sconti\"/>\r\n    <item\r\n        android:title=\"@string/action_notification\"\r\n        android:id=\"@+id/action_notification\"\r\n        android:icon=\"@drawable/ic_notifiche\"\r\n        android:enabled=\"true\" />\r\n\r\n</menu>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/menu/menu_bottom_navigation_view.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/res/menu/menu_bottom_navigation_view.xml	(date 1612014309100)
@@ -6,28 +6,17 @@
         android:id="@+id/action_home"
         android:enabled="true"
         android:title="@string/action_home"
-        android:icon="@drawable/ic_home"/>
+        android:icon="@drawable/ic_home_black_24dp"/>
     <item
         android:id="@+id/action_map"
         android:enabled="true"
         android:title="@string/action_map"
-        android:icon="@android:drawable/ic_menu_mapmode"/>
+        android:icon="@drawable/ic_map_black_24dp"/>
 
     <item
         android:id="@+id/action_statistics"
         android:enabled="true"
         android:title="@string/action_statistics"
-        android:icon="@drawable/ic_grafico"/>
-    <item
-        android:id="@+id/action_my_disocunt"
-        android:enabled="true"
-        android:title="@string/action_discount"
-        android:visible="false"
-        android:icon="@drawable/ic_sconti"/>
-    <item
-        android:title="@string/action_notification"
-        android:id="@+id/action_notification"
-        android:icon="@drawable/ic_notifiche"
-        android:enabled="true" />
+        android:icon="@drawable/ic_leaderboard_black_24dp"/>
 
 </menu>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_34__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_34__Default_Changelist_.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_34__Default_Changelist_.xml	(revision 202357282dff924337448e1fef726435a4521d26)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_23_01_2021_12_34_[Default_Changelist]" date="1611401681566" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_34_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 23/01/2021 12:34 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_34_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_34_[Default_Changelist]/shelved.patch	(revision 202357282dff924337448e1fef726435a4521d26)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_34_[Default_Changelist]/shelved.patch	(revision 202357282dff924337448e1fef726435a4521d26)
@@ -1,17 +0,0 @@
-Index: app/src/main/java/com/example/walktoshop/Seller/SellerViewAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.walktoshop.Seller;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\n\r\nimport com.example.walktoshop.R;\r\nimport com.example.walktoshop.Seller.Business;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.button.MaterialButton;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FieldValue;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class SellerViewAdapter extends ArrayAdapter {\r\n    private Context context;\r\n    private ArrayList<Discount> discounts;\r\n    private String UID;\r\n    private ArrayList<String> businessUID;\r\n    private String usage;\r\n    FirebaseFirestore db =FirebaseFirestore.getInstance();\r\n    public SellerViewAdapter(Context context, ArrayList<Discount> discounts, String UID,ArrayList businessUID,String usage) {\r\n        super(context, R.layout.activity_sellerviewadapter);\r\n        this.context=context;\r\n        this.discounts=discounts;\r\n        this.UID = UID;\r\n        this.usage= usage;\r\n        this.businessUID = businessUID;\r\n    }\r\n    @Override\r\n    public int getCount() {\r\n        return discounts.size();\r\n    }\r\n    @Override\r\n    public Object getItem(int position) {\r\n        return discounts.get(position);\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int position) {\r\n        return position;\r\n    }\r\n    @Override\r\n    public int getViewTypeCount() {\r\n        if(getCount() > 0){\r\n            return getCount();\r\n        }else{\r\n            return super.getViewTypeCount();\r\n        }\r\n    }\r\n    @Override\r\n    public int getItemViewType(int position) {\r\n        return position;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        LayoutInflater layoutInflater=(LayoutInflater) context.getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n        final View activity = layoutInflater.inflate(R.layout.activity_sellerviewadapter,parent,false);\r\n        //caratteristiche card di sconto\r\n        TextView disocuntDescription= activity.findViewById(R.id.disocuntDescription);\r\n        TextView date=activity.findViewById(R.id.date);\r\n        //bottone eliminazione\r\n        Button deleteBusiness =activity.findViewById(R.id.deletebusiness);\r\n        //modifica\r\n        Button editBusiness= activity.findViewById(R.id.editBusiness);\r\n        //bottone attivazione contapassi\r\n\r\n        //bottone abilitazione\r\n        if(this.discounts.get(position) != null && position>=0 && !discounts.isEmpty()){\r\n            Discount d=this.discounts.get(position);\r\n            //settare tutti gli attributi xml\r\n\r\n            date.setText(\"Scadenza: \"+d.millisecondsToDate(d.getExpiringDate()));\r\n            disocuntDescription.setText(d.getDescription());\r\n            //description.setText(d.getDescription());\r\n            //myDescription.setText(\"vuota\");\r\n\r\n            //visibility\r\n            deleteBusiness.setVisibility(View.GONE);\r\n            editBusiness.setVisibility(View.GONE);\r\n            if(this.usage==\"sellerHome\"){\r\n                deleteBusiness.setVisibility(View.VISIBLE);\r\n                editBusiness.setVisibility(View.VISIBLE);\r\n                deleteBusiness.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Log.d(\"p\",discounts.get(position).getUID()+\" \");\r\n                        getBusiness(position);\r\n                    }\r\n                });\r\n            }else if(this.usage==\"userHome\"){\r\n                //qui si devono inserire elementi grafici tipici della vista in cui √® chiamato\r\n            }else if(this.usage==\"backdropList\"){\r\n                //qui si devono inserire elementi grafici tipici della vista in cui √® chiamato\r\n            }\r\n        }\r\n        return activity;\r\n    }\r\n\r\n    private void deleteDiscount(int position){\r\n        //getBusiness(position);\r\n        db.collection(\"sconti\").document(discounts.get(position).getUID())\r\n                .delete()\r\n                .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                        Log.d(\"delete\", \"DocumentSnapshot successfully deleted!\");\r\n                    }\r\n                })\r\n                .addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        Log.w(\"delete\", \"Error deleting document\", e);\r\n                    }\r\n                }).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                SellerViewAdapter.this.discounts.remove(position);\r\n                SellerViewAdapter.this.notifyDataSetChanged();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getBusiness(int position)\r\n    {\r\n        db.collection(\"attivita\").document(businessUID.get(0)).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if(task.isSuccessful())\r\n                {   Log.d(\"position\",position+\" \");\r\n                    DocumentSnapshot document = task.getResult();\r\n                    ArrayList<String> discountUID = (ArrayList<String>) document.get(\"discountUID\");\r\n                    discountUID.remove(position);\r\n                    Log.d(\"disocuntUID\", discountUID.size()+\" \");\r\n                    updateBusiness(discountUID,position);\r\n                }else{\r\n                    Log.d(\"non successo\",\"non successo\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void updateBusiness(ArrayList<String> discountUID,int position)\r\n    {\r\n        db.collection(\"attivita\").document(businessUID.get(0)).update(\"discountUID\",discountUID).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                if(task.isSuccessful())\r\n                {\r\n                    deleteDiscount(position);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/walktoshop/Seller/SellerViewAdapter.java	(revision 98e10d5a1ba43c69d7f0530ca67cc1960b81a9f9)
-+++ app/src/main/java/com/example/walktoshop/Seller/SellerViewAdapter.java	(date 1611269100138)
-@@ -49,6 +49,7 @@
-         this.UID = UID;
-         this.usage= usage;
-         this.businessUID = businessUID;
-+
-     }
-     @Override
-     public int getCount() {
Index: app/src/main/res/layout/activity_user_view.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.coordinatorlayout.widget.CoordinatorLayout\r\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\r\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\nandroid:id=\"@+id/cardCoordinator\"\r\nandroid:layout_width=\"match_parent\"\r\nandroid:layout_height=\"match_parent\">\r\n\r\n<ProgressBar\r\n    android:id=\"@+id/sellerViewProgressBar\"\r\n    style=\"?android:attr/progressBarStyle\"\r\n    android:layout_width=\"91dp\"\r\n    android:layout_height=\"81dp\"\r\n    android:layout_marginLeft=\"160dp\"\r\n    android:layout_marginTop=\"250dp\"\r\n    android:visibility=\"gone\"/>\r\n    <TextView\r\n        android:id=\"@+id/alert\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"100dp\"\r\n        android:layout_marginLeft=\"55dp\"\r\n        android:layout_gravity=\"center\"\r\n        android:text=\"Nessuno sconto attivato\"\r\n        android:textSize=\"25dp\"\r\n        android:visibility=\"gone\"/>\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/userImage\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"190dp\"\r\n            android:src=\"@drawable/_707919\"/>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"16dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/scontiAttivita\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Sconti Attivi\"\r\n                android:textAppearance=\"?attr/textAppearanceHeadline4\"/>\r\n\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ListView\r\n                android:id=\"@+id/homeListView\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\">\r\n\r\n            </ListView>\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n\r\n    <com.google.android.material.bottomnavigation.BottomNavigationView\r\n        android:id=\"@+id/bottom_navigation\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"bottom\"\r\n        style=\"@style/Widget.MaterialComponents.BottomNavigationView.Colored\"\r\n        app:menu=\"@menu/menu_bottom_navigation_view\"/>\r\n\r\n</androidx.coordinatorlayout.widget.CoordinatorLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_user_view.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/res/layout/activity_user_view.xml	(date 1612010836513)
@@ -3,6 +3,7 @@
 xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:app="http://schemas.android.com/apk/res-auto"
 android:id="@+id/cardCoordinator"
+    android:background="@color/white_ice"
 android:layout_width="match_parent"
 android:layout_height="match_parent">
 
@@ -33,20 +34,28 @@
 
         <ImageView
             android:id="@+id/userImage"
-            android:layout_width="match_parent"
+            android:layout_width="300dp"
+            android:layout_gravity="center"
             android:layout_height="190dp"
             android:src="@drawable/_707919"/>
 
         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
-            android:orientation="vertical"
+            android:orientation="horizontal"
             android:padding="16dp">
+            <ImageView
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center"
+                android:src="@drawable/ic_sconti_1"/>
 
             <TextView
                 android:id="@+id/scontiAttivita"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
+                android:textColor="@color/black"
+                android:textStyle="bold"
                 android:text="Sconti Attivi"
                 android:textAppearance="?attr/textAppearanceHeadline4"/>
 
Index: app/src/main/res/layout/activity_user_statistics.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:orientation=\"horizontal\">\r\n\r\n    <com.github.mikephil.charting.charts.BarChart\r\n        android:id=\"@+id/barChart\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"500dp\" />\r\n\r\n    <com.google.android.material.bottomnavigation.BottomNavigationView\r\n        android:id=\"@+id/bottom_navigation\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"bottom\"\r\n        style=\"@style/Widget.MaterialComponents.BottomNavigationView.Colored\"\r\n        app:menu=\"@menu/menu_bottom_navigation_view\" />\r\n    <LinearLayout\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginTop=\"400dp\"\r\n        android:orientation=\"vertical\">\r\n        <TextView\r\n            android:id=\"@+id/stepsAvg\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:textSize=\"20dp\"\r\n            android:textColor=\"@color/black\"/>\r\n        <TextView\r\n            android:id=\"@+id/kcalAvg\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:textSize=\"20dp\"\r\n            android:textColor=\"@color/black\"/>\r\n        <TextView\r\n            android:id=\"@+id/kilometersAvg\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:textSize=\"20dp\"\r\n            android:textColor=\"@color/black\"/>\r\n    </LinearLayout>\r\n\r\n\r\n</androidx.coordinatorlayout.widget.CoordinatorLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_user_statistics.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/res/layout/activity_user_statistics.xml	(date 1612002242516)
@@ -2,49 +2,96 @@
 <androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
+    android:layout_gravity="center"
+    android:background="@color/white_ice"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     android:orientation="horizontal">
 
-    <com.github.mikephil.charting.charts.BarChart
-        android:id="@+id/barChart"
+    <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="500dp" />
+        android:layout_height="match_parent"
+        android:orientation="vertical">
 
-    <com.google.android.material.bottomnavigation.BottomNavigationView
-        android:id="@+id/bottom_navigation"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_gravity="bottom"
-        style="@style/Widget.MaterialComponents.BottomNavigationView.Colored"
-        app:menu="@menu/menu_bottom_navigation_view" />
-    <LinearLayout
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_gravity="center"
-        android:layout_marginTop="400dp"
-        android:orientation="vertical">
-        <TextView
-            android:id="@+id/stepsAvg"
-            android:layout_width="wrap_content"
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:orientation="vertical"
+            android:layout_marginTop="10dp"
+            android:background="@drawable/card_shape">
+            <TextView
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center"
+                android:textSize="15dp"
+                android:textColor="@color/black"
+                android:layout_marginTop="10dp"
+                android:text="Ultime 7 rilevazioni relative ai passi giornalieri"/>
+            <com.github.mikephil.charting.charts.BarChart
+                android:id="@+id/barChart"
+                android:layout_width="match_parent"
+                android:layout_height="150dp" />
+        </LinearLayout>
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:orientation="vertical"
+            android:layout_marginTop="10dp"
+            android:background="@drawable/card_shape">
+            <TextView
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center"
+                android:textSize="15dp"
+                android:textColor="@color/black"
+                android:layout_marginTop="10dp"
+                android:text="Ultime 7 rilevazioni relative alle Kcal"/>
+            <com.github.mikephil.charting.charts.BarChart
+                android:id="@+id/barChartKcal"
+                android:layout_width="match_parent"
+                android:layout_marginTop="10dp"
+                android:layout_height="150dp" />
+        </LinearLayout>
+        <LinearLayout
+            android:layout_width="match_parent"
             android:layout_height="wrap_content"
-            android:textSize="20dp"
-            android:textColor="@color/black"/>
-        <TextView
-            android:id="@+id/kcalAvg"
-            android:layout_marginLeft="20dp"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_marginTop="10dp"
-            android:textSize="20dp"
-            android:textColor="@color/black"/>
-        <TextView
-            android:id="@+id/kilometersAvg"
-            android:layout_marginTop="10dp"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_marginLeft="20dp"
-            android:textSize="20dp"
-            android:textColor="@color/black"/>
+            android:orientation="vertical"
+            android:layout_marginTop="10dp"
+            android:background="@drawable/card_shape">
+            <TextView
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center"
+                android:textSize="15dp"
+                android:textColor="@color/black"
+                android:layout_marginTop="10dp"
+                android:text="Ultime 7 rilevazioni relative ai Km giornalieri"/>
+            <com.github.mikephil.charting.charts.BarChart
+                android:id="@+id/barChartKm"
+                android:layout_width="match_parent"
+                android:layout_marginTop="10dp"
+                android:layout_height="150dp" />
+        </LinearLayout>
+
+
+    </LinearLayout>
+
+
+    <com.google.android.material.bottomnavigation.BottomNavigationView
+        android:id="@+id/bottom_navigation"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_gravity="bottom"
+        style="@style/Widget.MaterialComponents.BottomNavigationView.Colored"
+        app:menu="@menu/menu_bottom_navigation_view"
+        android:visibility="gone"/>
+    <LinearLayout
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center"
+        android:orientation="vertical">
+
+
+
     </LinearLayout>
 
 
Index: app/src/main/res/drawable/sconti.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/sconti.xml	(date 1612006560538)
+++ app/src/main/res/drawable/sconti.xml	(date 1612006560538)
@@ -0,0 +1,9 @@
+<vector android:height="100dp" android:viewportHeight="1300"
+    android:viewportWidth="1300" android:width="100dp" xmlns:android="http://schemas.android.com/apk/res/android">
+    <path android:fillColor="@color/red"
+        android:pathData="M710.7,338.1c-4.4,1 -8.3,2.2 -8.9,2.5 -0.6,0.4 9,10.8 21.3,23.3l22.4,22.6 -23,-22.7 -23,-22.6 -7.4,3.4c-4,1.9 -10.1,5.4 -13.5,7.8 -8.7,6.4 -347.6,345.7 -347.6,348.2 0,1.1 10.3,12.3 26.8,28.9l26.7,27 -27.2,-27c-15,-14.8 -27.4,-26.7 -27.6,-26.5 -0.2,0.3 -0.9,2 -1.6,3.9 -1.8,5.5 -1.4,16.3 1,22.8 2.1,5.6 7.5,11.1 128.8,132.6 142.3,142.5 131.8,133 146.9,133 15.7,-0 -1.4,15.9 192.8,-178.6l173,-173.2 4.7,-9.1c2.5,-4.9 5.8,-13 7.3,-18 2.5,-8.1 2.8,-10.3 2.8,-23.9 -0.1,-13.7 -1.8,-60.6 -4.4,-118.5 -0.6,-12.4 -1.7,-39.8 -2.6,-61 -1.5,-39.5 -2.1,-44.5 -5.3,-50.8 -2.1,-4.1 -13.2,-15.2 -15.3,-15.2 -0.7,-0 -10.3,8.9 -21.3,19.7l-20,19.8 19.9,-20.2 20,-20.2 -3,-1.2c-3.8,-1.5 -20,-2.5 -63.9,-3.8 -63.2,-2 -100.3,-3.1 -127.5,-4.1 -35.8,-1.3 -42.2,-1.2 -51.3,1.1zM906.7,395.2c8,3 17.2,12.3 20.3,20.4 5.5,14.8 0.4,32.9 -11.8,41.7 -15.5,11.2 -34.5,9.6 -47.7,-4 -4.4,-4.5 -6.7,-8.8 -9,-16.7 -4.8,-16.6 6.6,-36.8 23.8,-42.2 6.8,-2.1 17.6,-1.7 24.4,0.8zM674.4,529.4c8,3.9 10.4,5.9 16.3,13.4 6.4,8 8.6,14.9 8.7,26.2 0,7.9 -0.4,10.5 -2.5,15.5 -7,16.9 -24.2,34.3 -40.9,41.5 -4,1.7 -8,2.5 -14.7,2.8 -6.5,0.3 -9.1,0.8 -8.6,1.6 0.3,0.6 -0.3,0.3 -1.4,-0.7 -1.1,-0.9 -2.4,-1.7 -3,-1.7 -2.5,-0 -11.2,-4.4 -16,-8.2 -6.1,-4.6 -12.8,-14.1 -14.4,-20.1 -0.6,-2.3 -1.8,-5.1 -2.7,-6.2 -1.2,-1.4 -1.3,-1.6 -0.2,-0.8 1.3,1 1.5,-0 1.5,-7.6 0.1,-7.5 0.5,-9.5 3.2,-15.4 10,-21.2 27.7,-37.2 47.4,-42.7 10.3,-2.8 18.1,-2.1 27.3,2.4zM549.5,547c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM944.5,583c20.3,20.3 36.8,37 36.5,37 -0.3,-0 -17.2,-16.7 -37.5,-37 -20.3,-20.4 -36.8,-37 -36.5,-37 0.3,-0 17.2,16.6 37.5,37zM750,551.5c-2.4,2.5 -4.6,4.5 -4.9,4.5 -0.3,-0 1.5,-2 3.9,-4.5 2.4,-2.5 4.6,-4.5 4.9,-4.5 0.3,-0 -1.5,2 -3.9,4.5zM557.5,555c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM744,557.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM565.5,563c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM736,565.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM573.5,571c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM728,573.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM581.5,579c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM720,581.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM590.6,588.2l2.9,3.3 -3.2,-2.9c-3.1,-2.8 -3.8,-3.6 -3,-3.6 0.2,-0 1.6,1.5 3.3,3.2zM712,589.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM704,597.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM696,605.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM681,620.5c-4.1,4.1 -7.7,7.5 -7.9,7.5 -0.3,-0 2.8,-3.4 6.9,-7.5 4.1,-4.1 7.7,-7.5 7.9,-7.5 0.3,-0 -2.8,3.4 -6.9,7.5zM777.9,629.4c2,2.1 3.7,4.2 3.9,4.6 0.2,0.4 -2.8,1.7 -6.5,2.8 -3.7,1.2 -20.3,6.4 -36.8,11.7 -35.5,11.4 -64.4,20.5 -65.2,20.5 -0.3,-0 -0.2,0.7 0.1,1.6 0.5,1.4 0.4,1.5 -0.8,0.5 -1.1,-0.9 -6,0.3 -23.2,5.8 -12.1,3.8 -25,7.9 -28.9,9.1 -5.8,1.8 -8.2,3.3 -13.5,8.4l-6.5,6.1 5.4,-5.7 5.4,-5.7 -4.4,1.3c-6,1.9 -41.6,13.2 -50.9,16.2 -4.1,1.3 -8.1,2.4 -8.9,2.4 -1.5,-0 -15.1,-12.8 -15.1,-14.2 0,-0.4 8,-3.3 17.8,-6.4 42.9,-13.6 65,-20.6 69.2,-22 2.5,-0.9 8.3,-2.7 13,-4 6.8,-2 9.4,-3.4 13,-6.7 4.3,-4.1 4.4,-4.1 1,-0.4 -3.4,3.7 -3.4,3.8 -0.9,2.8 1.5,-0.5 4.6,-1.5 6.9,-2.1l4.2,-1.1 -2.2,-2.4c-1.3,-1.4 -2.8,-2.2 -3.4,-1.8 -0.6,0.3 -0.8,0.2 -0.3,-0.2 0.4,-0.5 -0.1,-1.8 -1,-2.9 -1.7,-2 -1.7,-2.1 0.2,-0.4 1.8,1.7 2,1.7 4.5,-0.5l2.5,-2.2 -2.3,2.6 -2.2,2.5 2.5,2.4 2.5,2.3 6.7,-2c3.8,-1.2 15.6,-4.9 26.3,-8.3 10.7,-3.4 32.6,-10.4 48.5,-15.5l29,-9.2 3.4,3.1c1.9,1.7 5,4.8 7,7zM672,629.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM638.6,636.2l2.9,3.3 -3.2,-2.9c-3.1,-2.8 -3.8,-3.6 -3,-3.6 0.2,-0 1.6,1.5 3.3,3.2zM664,637.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM645.5,643c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM677.5,675c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM685.5,683c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM694,691.5c1.9,1.9 3.2,3.5 2.9,3.5 -0.3,-0 -2,-1.6 -3.9,-3.5 -1.9,-1.9 -3.2,-3.5 -2.9,-3.5 0.3,-0 2,1.6 3.9,3.5zM702.6,700.2l2.9,3.3 -3.2,-2.9c-3.1,-2.8 -3.8,-3.6 -3,-3.6 0.2,-0 1.6,1.5 3.3,3.2zM691.5,701.9c15.5,7.2 26.5,24 26.5,40.8 0,7.4 -3.9,18.8 -9,26.4 -5.6,8.1 -17.9,20.5 -25,25 -24.3,15.6 -53.9,8.2 -66,-16.5 -4.5,-9.1 -5.3,-20.8 -2.1,-30.2 4.2,-12.5 15.3,-27.1 28,-36.8 6.9,-5.3 10.5,-7.2 18.4,-9.6 12,-3.6 19.9,-3.4 29.2,0.9zM600,701.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM710,707.5c1.9,1.9 3.2,3.5 2.9,3.5 -0.3,-0 -2,-1.6 -3.9,-3.5 -1.9,-1.9 -3.2,-3.5 -2.9,-3.5 0.3,-0 2,1.6 3.9,3.5zM592,709.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM718.6,716.2l2.9,3.3 -3.2,-2.9c-3.1,-2.8 -3.8,-3.6 -3,-3.6 0.2,-0 1.6,1.5 3.3,3.2zM584,717.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM725.5,723c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM576,725.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM733.5,731c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM568,733.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM741.5,739c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM560,741.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM749.5,747c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM552,749.3c0,0.2 -1.7,1.9 -3.7,3.8l-3.8,3.4 3.4,-3.8c3.3,-3.4 4.1,-4.2 4.1,-3.4zM756.5,754c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM544,757.3c0,0.2 -1.2,1.4 -2.7,2.8l-2.8,2.4 2.4,-2.8c2.3,-2.5 3.1,-3.2 3.1,-2.4zM523.3,823.5c-0.3,0.9 -0.8,1.4 -1,1.1 -0.3,-0.3 -0.2,-0.9 0.2,-1.5 0.9,-1.6 1.5,-1.3 0.8,0.4zM428,824.4c0,0.2 -0.8,1 -1.7,1.7 -1.6,1.3 -1.7,1.2 -0.4,-0.4 1.3,-1.6 2.1,-2.1 2.1,-1.3zM548,917.5c1.3,1.4 2.1,2.5 1.8,2.5 -0.2,-0 -1.5,-1.1 -2.8,-2.5 -1.3,-1.4 -2.1,-2.5 -1.8,-2.5 0.2,-0 1.5,1.1 2.8,2.5zM555.5,925c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM563.5,933c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM571.5,941c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM579.5,949c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM587.5,957c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM595.5,965c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM603.5,973c1,1.1 1.6,2 1.3,2 -0.3,-0 -1.3,-0.9 -2.3,-2 -1,-1.1 -1.6,-2 -1.3,-2 0.3,-0 1.3,0.9 2.3,2zM610.6,980.2l2.9,3.3 -3.2,-2.9c-1.8,-1.7 -3.3,-3.1 -3.3,-3.3 0,-0.8 0.8,-0.1 3.6,2.9zM618.6,988.2l2.9,3.3 -3.2,-2.9c-1.8,-1.7 -3.3,-3.1 -3.3,-3.3 0,-0.8 0.8,-0.1 3.6,2.9z" android:strokeColor="#00000000"/>
+    <path android:fillColor="@color/white"
+        android:pathData="M652.1,547.5c-9.9,4.4 -26.9,20.3 -32.5,30.4 -5.9,11 -4,22.2 5.1,28.5 8.6,6 20.5,3.3 32.6,-7.3 13.6,-11.9 22.7,-25.2 22.7,-33.1 0,-8.4 -4.5,-15.5 -11.7,-18.6 -4.2,-1.8 -11.9,-1.7 -16.2,0.1z" android:strokeColor="#00000000"/>
+    <path android:fillColor="@color/white"
+        android:pathData="M669.1,721c-11.4,5.2 -28.3,22.3 -33.1,33.5 -5.9,13.8 3.3,28.5 17.7,28.5 3.9,-0 12.7,-3.6 16.8,-6.8 17.4,-13.7 27.5,-27.7 27.5,-37.9 -0.1,-7.3 -5.8,-15.8 -12.3,-18.2 -4.4,-1.7 -11.8,-1.3 -16.6,0.9z" android:strokeColor="#00000000"/>
+</vector>
Index: app/src/main/res/drawable/ic_map_black_24dp.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/ic_map_black_24dp.xml	(date 1612014228747)
+++ app/src/main/res/drawable/ic_map_black_24dp.xml	(date 1612014228747)
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+  <path
+      android:pathData="M20.5,3l-0.16,0.03L15,5.1 9,3 3.36,4.9c-0.21,0.07 -0.36,0.25 -0.36,0.48V20.5c0,0.28 0.22,0.5 0.5,0.5l0.16,-0.03L9,18.9l6,2.1 5.64,-1.9c0.21,-0.07 0.36,-0.25 0.36,-0.48V3.5c0,-0.28 -0.22,-0.5 -0.5,-0.5zM15,19l-6,-2.11V5l6,2.11V19z"
+      android:fillColor="#000000"/>
+</vector>
Index: app/src/main/res/drawable/ic_home_black_24dp.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/ic_home_black_24dp.xml	(date 1612014248451)
+++ app/src/main/res/drawable/ic_home_black_24dp.xml	(date 1612014248451)
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+  <path
+      android:pathData="M10,20v-6h4v6h5v-8h3L12,3 2,12h3v8z"
+      android:fillColor="#000000"/>
+</vector>
Index: app/src/main/res/drawable/card_shape.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\" android:shape=\"rectangle\">\r\n\r\n    <solid android:color=\"#f8f8ff\" />\r\n    <corners android:bottomLeftRadius=\"16dp\" android:bottomRightRadius=\"16dp\"/>\r\n\r\n</shape>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/card_shape.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/res/drawable/card_shape.xml	(date 1612002239903)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
 
-    <solid android:color="#f8f8ff" />
-    <corners android:bottomLeftRadius="16dp" android:bottomRightRadius="16dp"/>
+    <solid android:color="@color/white" />
+    <corners android:topLeftRadius="32dp" android:topRightRadius="32dp" android:bottomLeftRadius="32dp" android:bottomRightRadius="32dp"/>
 
 </shape>
\ No newline at end of file
Index: app/src/main/java/com/example/walktoshop/Seller/SellerViewAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.walktoshop.Seller;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.CalendarView;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\n\r\nimport com.example.walktoshop.R;\r\nimport com.example.walktoshop.Seller.Business;\r\nimport com.example.walktoshop.User.CardView;\r\nimport com.example.walktoshop.User.UserView;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.button.MaterialButton;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FieldValue;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.gson.Gson;\r\n\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class SellerViewAdapter extends ArrayAdapter {\r\n    private Context context;\r\n    private ArrayList<Discount> discounts;\r\n    private String UID;\r\n    private ArrayList<String> businessUID;\r\n    private String usage;\r\n    FirebaseFirestore db =FirebaseFirestore.getInstance();\r\n\r\n    public SellerViewAdapter(Context context, ArrayList<Discount> discounts, String UID,ArrayList businessUID,String usage) {\r\n        super(context, R.layout.activity_sellerviewadapter);\r\n        this.context=context;\r\n        this.discounts=discounts;\r\n        this.UID = UID;\r\n        this.usage= usage;\r\n        this.businessUID = businessUID;\r\n\r\n    }\r\n    @Override\r\n    public int getCount() {\r\n        return discounts.size();\r\n    }\r\n    @Override\r\n    public Object getItem(int position) {\r\n        return discounts.get(position);\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int position) {\r\n        return position;\r\n    }\r\n    @Override\r\n    public int getViewTypeCount() {\r\n        if(getCount() > 0){\r\n            return getCount();\r\n        }else{\r\n            return super.getViewTypeCount();\r\n        }\r\n    }\r\n    @Override\r\n    public int getItemViewType(int position) {\r\n        return position;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        LayoutInflater layoutInflater=(LayoutInflater) context.getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n        final View activity = layoutInflater.inflate(R.layout.activity_sellerviewadapter,parent,false);\r\n        //caratteristiche card di sconto\r\n        TextView disocuntDescription= activity.findViewById(R.id.disocuntDescription);\r\n        TextView date = activity.findViewById(R.id.date);\r\n        //bottone eliminazione\r\n        ImageButton deleteDiscount =activity.findViewById(R.id.deleteDiscount);\r\n        //modifica\r\n        ImageButton editDiscount = activity.findViewById(R.id.editDiscount);\r\n        TextView difficulty = activity.findViewById(R.id.difficulty);\r\n        ImageView difficultyColor = activity.findViewById(R.id.difficultyColor);\r\n        ImageButton arrow = (ImageButton) activity.findViewById(R.id.arrow);\r\n        Button addDiscount = (Button) activity.findViewById(R.id.addButton);\r\n\r\n        //bottone attivazione contapassi\r\n        //bottone abilitazione\r\n        if(this.discounts.get(position) != null && position>=0 && !discounts.isEmpty()){\r\n            Discount d=this.discounts.get(position);\r\n            //settare tutti gli attributi xml\r\n            Log.d(\"DATE\", d.millisecondsToDate(d.getExpiringDate()));\r\n            date.setText(\"scadenza: \"+d.millisecondsToDate(d.getExpiringDate()));\r\n            disocuntDescription.setText(d.getDescription());\r\n            String stringedGoal=d.getDiscountsQuantity();\r\n            Log.d(\"string\",stringedGoal+\"\");\r\n\r\n            if(stringedGoal != null){\r\n                int goal= Integer.parseInt(stringedGoal);\r\n\r\n                if(goal<5000){\r\n                    difficulty.setText(\"Facile\");\r\n\r\n                }else if(goal>=5000 && goal<=20000){\r\n                    difficulty.setText(\"Difficolt√† Media\");\r\n                    difficultyColor.setImageResource(R.drawable.ic_yellow);\r\n                }else if(goal>20000){\r\n                    difficulty.setText(\"Difficile\");\r\n                    difficultyColor.setImageResource(R.drawable.ic_red);\r\n                }\r\n            }\r\n            //visibility\r\n            deleteDiscount.setVisibility(View.GONE);\r\n            editDiscount.setVisibility(View.GONE);\r\n            if(this.usage==\"sellerHome\"){\r\n                arrow.setVisibility(View.GONE);\r\n                addDiscount.setVisibility(View.GONE);\r\n                deleteDiscount.setVisibility(View.VISIBLE);\r\n                editDiscount.setVisibility(View.VISIBLE);\r\n                if(Long.parseLong(d.getExpiringDate()) < Calendar.getInstance().getTimeInMillis()){\r\n                    date.setText(\"Scaduto\");\r\n                }\r\n                deleteDiscount.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Log.d(\"p\",discounts.get(position).getUID()+\" \");\r\n                        getBusiness(position);\r\n                    }\r\n                });\r\n            }else if(this.usage==\"userHome\"){\r\n                arrow.setVisibility(View.VISIBLE);\r\n                addDiscount.setVisibility(View.GONE);\r\n                if(Long.parseLong(d.getExpiringDate()) < Calendar.getInstance().getTimeInMillis()){\r\n                    arrow.setVisibility(View.GONE);\r\n                    date.setText(\"Scaduto\");\r\n                }\r\n                arrow.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        final Intent intent = new Intent(getContext(), CardView.class);\r\n                        Gson gson = new Gson();\r\n                        String jsonDiscount = gson.toJson(d);\r\n                        intent.putExtra(\"discount\",jsonDiscount);\r\n                        Log.d(\"json\",jsonDiscount);\r\n                        intent.putExtra(\"UID\",UID);\r\n                        context.startActivity(intent);\r\n                    }\r\n                });\r\n                //qui si devono inserire elementi grafici tipici della vista in cui √® chiamato\r\n            }else if(this.usage==\"backdropList\"){\r\n                arrow.setVisibility(View.GONE);\r\n                addDiscount.setVisibility(View.VISIBLE);\r\n                if(Long.parseLong(d.getExpiringDate()) < Calendar.getInstance().getTimeInMillis()){\r\n                    date.setText(\"Scaduto\");\r\n                }\r\n                addDiscount.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View view) {\r\n                        addDiscounts(d.getUID());\r\n                    }\r\n                });\r\n                //qui si devono inserire elementi grafici tipici della vista in cui √® chiamato\r\n            }\r\n        }\r\n        return activity;\r\n    }\r\n\r\n    private void deleteDiscount(int position){\r\n        //getBusiness(position);\r\n        db.collection(\"sconti\").document(discounts.get(position).getUID())\r\n                .delete()\r\n                .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                        Log.d(\"delete\", \"DocumentSnapshot successfully deleted!\");\r\n                    }\r\n                })\r\n                .addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        Log.w(\"delete\", \"Error deleting document\", e);\r\n                    }\r\n                }).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                SellerViewAdapter.this.discounts.remove(position);\r\n                SellerViewAdapter.this.notifyDataSetChanged();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getBusiness(int position)\r\n    {\r\n        db.collection(\"attivita\").document(businessUID.get(0)).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if(task.isSuccessful())\r\n                {   Log.d(\"position\",position+\" \");\r\n                    DocumentSnapshot document = task.getResult();\r\n                    ArrayList<String> discountUID = (ArrayList<String>) document.get(\"discountUID\");\r\n                    discountUID.remove(position);\r\n                    Log.d(\"discountUID\", discountUID.size()+\" \");\r\n                    updateBusiness(discountUID,position);\r\n                }else{\r\n                    Log.d(\"non successo\",\"non successo\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void updateBusiness(ArrayList<String> discountUID,int position)\r\n    {\r\n        db.collection(\"attivita\").document(businessUID.get(0)).update(\"discountUID\",discountUID).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                if(task.isSuccessful())\r\n                {\r\n                    deleteDiscount(position);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //query di aggiunta sconto\r\n    private void addDiscounts(String discountuid){\r\n        db.collection(\"utente\").document(UID).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if(task.isSuccessful()){\r\n                    DocumentSnapshot document=task.getResult();\r\n                    ArrayList<String> discountUID= (ArrayList<String>) document.get(\"discountUID\");\r\n                    if(discountUID==null){\r\n                        discountUID=new ArrayList<>();\r\n                    }\r\n                    discountUID.add(discountuid);\r\n                    updateUserDiscounts(discountUID);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    private void updateUserDiscounts(ArrayList<String> discountUID){\r\n        db.collection(\"utente\").document(UID).update(\"discountUID\",discountUID);\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/walktoshop/Seller/SellerViewAdapter.java	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/java/com/example/walktoshop/Seller/SellerViewAdapter.java	(date 1612004135957)
@@ -137,7 +137,7 @@
                 deleteDiscount.setOnClickListener(new View.OnClickListener() {
                     @Override
                     public void onClick(View v) {
-                        Log.d("p",discounts.get(position).getUID()+" ");
+                        //Log.d("p",discounts.get(position).getUID()+" ");
                         getBusiness(position);
                     }
                 });
Index: app/src/main/res/drawable/ic_navigate_next_black_24dp.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/ic_navigate_next_black_24dp.xml	(date 1612014191475)
+++ app/src/main/res/drawable/ic_navigate_next_black_24dp.xml	(date 1612014191475)
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+  <path
+      android:pathData="M10,6L8.59,7.41 13.17,12l-4.58,4.59L10,18l6,-6z"
+      android:fillColor="#000000"/>
+</vector>
Index: app/src/main/res/drawable/ic_leaderboard_black_24dp.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/ic_leaderboard_black_24dp.xml	(date 1612014165013)
+++ app/src/main/res/drawable/ic_leaderboard_black_24dp.xml	(date 1612014165013)
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+  <path
+      android:pathData="M7.5,21H2V9h5.5V21zM14.75,3h-5.5v18h5.5V3zM22,11h-5.5v10H22V11z"
+      android:fillColor="#000000"/>
+</vector>
Index: app/src/main/res/drawable/ic_add_white.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/ic_add_white.xml	(date 1612011596777)
+++ app/src/main/res/drawable/ic_add_white.xml	(date 1612011596777)
@@ -0,0 +1,10 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:tint="@android:color/white"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+  <path
+      android:pathData="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"
+      android:fillColor="#ffffff"/>
+</vector>
Index: app/src/main/res/drawable/ic_add_location.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/ic_add_location.xml	(date 1612010958245)
+++ app/src/main/res/drawable/ic_add_location.xml	(date 1612010958245)
@@ -0,0 +1,10 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:tint="@color/white"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+  <path
+      android:pathData="M20,1v3h3v2h-3v3h-2L18,6h-3L15,4h3L18,1h2zM12,13c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM14,3.25L14,7h3v3h2.92c0.05,0.39 0.08,0.79 0.08,1.2 0,3.32 -2.67,7.25 -8,11.8 -5.33,-4.55 -8,-8.48 -8,-11.8C4,6.22 7.8,3 12,3c0.68,0 1.35,0.08 2,0.25z"
+      android:fillColor="@color/white"/>
+</vector>
Index: app/src/main/res/drawable/ic_freccia_.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/ic_freccia_.xml	(date 1612012913699)
+++ app/src/main/res/drawable/ic_freccia_.xml	(date 1612012913699)
@@ -0,0 +1,10 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+  <path
+      android:pathData="M8,12c0,4.6 0.1,8.1 0.3,7.9 0.1,-0.2 1.9,-2.2 4,-4.5l3.7,-4 -4,-3.9 -4,-3.9 0,8.4z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+</vector>
Index: app/src/main/res/layout/activity_sellerviewadapter.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\" android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/imageView\"\r\n                    android:layout_width=\"100dp\"\r\n                    android:layout_height=\"100dp\"\r\n                    android:src=\"@drawable/sconti\">\r\n                </ImageView>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"230dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\"\r\n                    android:layout_gravity=\"center\">\r\n                    <LinearLayout\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:orientation=\"horizontal\">\r\n                        <TextView\r\n                            android:id=\"@+id/difficulty\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:textSize=\"20dp\"\r\n                            android:layout_marginVertical=\"8dp\"\r\n                            android:textColor=\"@color/black\"\r\n                            android:text=\"Easy Difficult\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/difficultyColor\"\r\n                            android:layout_width=\"24dp\"\r\n                            android:layout_height=\"26dp\"\r\n                            android:layout_marginTop=\"1dp\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:src=\"@drawable/ic_green\" />\r\n                    </LinearLayout>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/disocuntDescription\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"17dp\"\r\n                        android:text=\"questa √® una entuale descrizione da inserire all'interno dello sconto\">\r\n                    </TextView>\r\n\r\n                </LinearLayout>\r\n                <LinearLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center\">\r\n                    <ImageButton\r\n                        android:id=\"@+id/arrow\"\r\n                        android:background=\"@color/white\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:src=\"@drawable/ic_freccia1\">\r\n\r\n                    </ImageButton>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"bottom\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/date\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:layout_marginLeft=\"20dp\"\r\n                    android:layout_marginRight=\"130dp\"\r\n                    android:text=\"scadenza: 27/01/2021\"\r\n                    android:textColor=\"@color/black\">\r\n\r\n                </TextView>\r\n\r\n                <Button\r\n                    android:id=\"@+id/addButton\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:background=\"@drawable/ovale\"\r\n                    android:visibility=\"visible\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:text=\"AGGIUNGI\">\r\n                </Button>\r\n\r\n                <ImageButton\r\n                    android:id=\"@+id/editDiscount\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:background=\"@color/white\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:src=\"@android:drawable/ic_menu_edit\"\r\n                    android:tint=\"@color/verde_maggio\"\r\n                    android:visibility=\"gone\"/>\r\n                <ImageButton\r\n                    android:id=\"@+id/deleteDiscount\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:background=\"@color/white\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:src=\"@android:drawable/ic_menu_delete\"\r\n                    android:tint=\"@color/verde_maggio\"\r\n                    android:visibility=\"gone\"/>\r\n\r\n            </LinearLayout>\r\n\r\n        </LinearLayout>\r\n\r\n    </androidx.cardview.widget.CardView>\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_sellerviewadapter.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/res/layout/activity_sellerviewadapter.xml	(date 1612012969950)
@@ -37,7 +37,8 @@
                             android:id="@+id/difficulty"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
-                            android:textSize="20dp"
+                            android:textStyle="bold"
+                           android:textSize="20dp"
                             android:layout_marginVertical="8dp"
                             android:textColor="@color/black"
                             android:text="Easy Difficult" />
@@ -70,7 +71,7 @@
                         android:background="@color/white"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
-                        android:src="@drawable/ic_freccia1">
+                        android:src="@drawable/ic_freccia_">
 
                     </ImageButton>
                 </LinearLayout>
@@ -86,7 +87,9 @@
                     android:layout_height="wrap_content"
                     android:layout_gravity="center"
                     android:layout_marginLeft="20dp"
-                    android:layout_marginRight="130dp"
+                    android:layout_marginRight="100dp"
+                    android:textStyle="bold"
+                    android:textSize="15dp"
                     android:text="scadenza: 27/01/2021"
                     android:textColor="@color/black">
 
Index: app/src/main/res/layout/activity_managediscount.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<LinearLayout\r\n    android:layout_height=\"match_parent\"\r\n    android:layout_width=\"match_parent\" xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"@color/white_ice\">\r\n\r\n    <ImageView\r\n        android:id=\"@+id/discountImage\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"200dp\"\r\n        android:src=\"@drawable/_0943903\"/>\r\n\r\n\r\n    <EditText\r\n        android:layout_marginTop=\"75dp\"\r\n        android:id=\"@+id/description\"\r\n        android:layout_width=\"317dp\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_height=\"54dp\"\r\n        android:background=\"@drawable/ic_text_box\"\r\n        android:drawableStart=\"@drawable/ic_description\"\r\n        android:drawablePadding=\"4dp\"\r\n        android:elevation=\"6dp\"\r\n        android:ems=\"10\"\r\n        android:hint=\"@string/description\"\r\n        android:paddingStart=\"6dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.394\" />\r\n\r\n    <EditText\r\n        android:layout_marginTop=\"25dp\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_width=\"317dp\"\r\n        android:layout_height=\"54dp\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        android:hint=\"@string/disocuntsQuantity\"\r\n        android:drawablePadding=\"4dp\"\r\n        android:elevation=\"6dp\"\r\n        android:ems=\"10\"\r\n        android:paddingStart=\"6dp\"\r\n        android:background=\"@drawable/ic_text_box\"\r\n        android:drawableStart=\"@drawable/ic_walk\"\r\n        android:id=\"@+id/disocuntsQuantity\"\r\n        android:inputType=\"number\" />\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:orientation=\"horizontal\"\r\n        android:layout_marginTop=\"25dp\"\r\n        android:layout_marginRight=\"7dp\">\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/addDate\"\r\n            android:layout_width=\"62dp\"\r\n            android:layout_height=\"44dp\"\r\n            android:background=\"@color/white_ice\"\r\n            android:drawableStart=\"@drawable/ic_calendar\"\r\n            android:src=\"@android:drawable/ic_menu_my_calendar\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/expiringDate\"\r\n            android:layout_width=\"270dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@drawable/ic_text_box\"\r\n            android:elevation=\"6dp\"\r\n            android:hint=\"@string/expiringDate\"\r\n            android:textSize=\"25dp\"\r\n            />\r\n    </LinearLayout>\r\n    <Button\r\n        android:layout_marginTop=\"25dp\"\r\n        android:layout_marginRight=\"20dp\"\r\n        android:layout_gravity=\"bottom|end\"\r\n        android:id=\"@+id/add\"\r\n        android:background=\"@color/verde_maggio\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"@string/add\"\r\n        />\r\n\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_managediscount.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/res/layout/activity_managediscount.xml	(date 1612003780471)
@@ -9,8 +9,9 @@
 
     <ImageView
         android:id="@+id/discountImage"
-        android:layout_width="match_parent"
-        android:layout_height="200dp"
+        android:layout_gravity="center"
+        android:layout_width="300dp"
+        android:layout_height="190dp"
         android:src="@drawable/_0943903"/>
 
 
@@ -34,7 +35,7 @@
         app:layout_constraintVertical_bias="0.394" />
 
     <EditText
-        android:layout_marginTop="25dp"
+        android:layout_marginTop="30dp"
         android:layout_gravity="center"
         android:layout_width="317dp"
         android:layout_height="54dp"
@@ -57,7 +58,7 @@
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:orientation="horizontal"
-        android:layout_marginTop="25dp"
+        android:layout_marginTop="30dp"
         android:layout_marginRight="7dp">
 
         <ImageButton
@@ -79,7 +80,7 @@
             />
     </LinearLayout>
     <Button
-        android:layout_marginTop="25dp"
+        android:layout_marginTop="30dp"
         android:layout_marginRight="20dp"
         android:layout_gravity="bottom|end"
         android:id="@+id/add"
Index: app/src/main/res/layout/activity_seller_view.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.coordinatorlayout.widget.CoordinatorLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:id=\"@+id/sellerViewcontainer\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/white_ice\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/alertSeller\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginTop=\"100dp\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:textSize=\"25dp\"/>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/sellerLinearLayout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/sellerImage\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"190dp\"\r\n                android:src=\"@drawable/_0943903\"/>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\"\r\n                android:padding=\"16dp\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/scontiAttivita\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Sconti Attivit√†\"\r\n                    android:textAppearance=\"?attr/textAppearanceHeadline4\"/>\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"vertical\">\r\n\r\n               <ListView\r\n                    android:id=\"@+id/listView\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_alignParentStart=\"true\"\r\n                    android:layout_alignParentLeft=\"true\"\r\n                    android:layout_alignParentTop=\"true\"\r\n                    android:layout_alignParentEnd=\"true\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:layout_alignParentBottom=\"true\"\r\n                    android:clickable=\"false\"\r\n                    android:focusable=\"false\">\r\n                </ListView>\r\n\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n\r\n\r\n    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=\"@+id/addBusinessFab\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"bottom|right\"\r\n        android:layout_marginRight=\"@dimen/material_bottom_margin\"\r\n        android:layout_marginBottom=\"@dimen/material_botton_margin\"\r\n        android:src=\"@android:drawable/ic_menu_mapmode\"\r\n        app:backgroundTint=\"@color/verde_maggio\"\r\n        app:backgroundTintMode=\"src_over\"\r\n        app:fabSize=\"normal\"\r\n        app:rippleColor=\"#00FF00\" />\r\n        />\r\n    <ProgressBar\r\n        android:id=\"@+id/sellerViewProgressBar\"\r\n        style=\"?android:attr/progressBarStyle\"\r\n        android:layout_width=\"91dp\"\r\n        android:layout_height=\"81dp\"\r\n        android:layout_marginLeft=\"160dp\"\r\n        android:layout_marginTop=\"350dp\" />\r\n    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=\"@+id/fab\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"bottom|right\"\r\n        android:layout_marginRight=\"@dimen/material_bottom_margin\"\r\n        android:layout_marginBottom=\"@dimen/material_botton_margin\"\r\n        android:src=\"@drawable/ic_add\"\r\n        app:backgroundTint=\"@color/verde_maggio\"\r\n        app:backgroundTintMode=\"src_over\"\r\n        app:fabSize=\"normal\"\r\n        app:rippleColor=\"#00FF00\" />\r\n\r\n</androidx.coordinatorlayout.widget.CoordinatorLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_seller_view.xml	(revision 202357282dff924337448e1fef726435a4521d26)
+++ app/src/main/res/layout/activity_seller_view.xml	(date 1612010960682)
@@ -23,21 +23,30 @@
 
             <ImageView
                 android:id="@+id/sellerImage"
-                android:layout_width="match_parent"
+                android:layout_width="300dp"
+                android:layout_gravity="center"
                 android:layout_height="190dp"
                 android:src="@drawable/_0943903"/>
 
             <LinearLayout
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
-                android:orientation="vertical"
+                android:orientation="horizontal"
                 android:padding="16dp">
 
+                <ImageView
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_gravity="center"
+                    android:src="@drawable/ic_sconti_1" />
+
                 <TextView
                     android:id="@+id/scontiAttivita"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:text="Sconti Attivit√†"
+                    android:textColor="@color/black"
+                    android:textStyle="bold"
                     android:textAppearance="?attr/textAppearanceHeadline4"/>
 
             </LinearLayout>
@@ -72,7 +81,8 @@
         android:layout_gravity="bottom|right"
         android:layout_marginRight="@dimen/material_bottom_margin"
         android:layout_marginBottom="@dimen/material_botton_margin"
-        android:src="@android:drawable/ic_menu_mapmode"
+        android:src="@drawable/ic_add_location"
+        android:tint="@color/white"
         app:backgroundTint="@color/verde_maggio"
         app:backgroundTintMode="src_over"
         app:fabSize="normal"
@@ -85,6 +95,7 @@
         android:layout_height="81dp"
         android:layout_marginLeft="160dp"
         android:layout_marginTop="350dp" />
+
     <com.google.android.material.floatingactionbutton.FloatingActionButton
         android:id="@+id/fab"
         android:layout_width="wrap_content"
@@ -92,10 +103,13 @@
         android:layout_gravity="bottom|right"
         android:layout_marginRight="@dimen/material_bottom_margin"
         android:layout_marginBottom="@dimen/material_botton_margin"
-        android:src="@drawable/ic_add"
+        android:longClickable="true"
+        android:src="@drawable/ic_add_white"
+        android:tint="@color/white"
         app:backgroundTint="@color/verde_maggio"
-        app:backgroundTintMode="src_over"
+        app:backgroundTintMode="src_in"
         app:fabSize="normal"
+        app:navigationIcon="@drawable/ic_add_white"
         app:rippleColor="#00FF00" />
 
 </androidx.coordinatorlayout.widget.CoordinatorLayout>
\ No newline at end of file
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_01_2021_16_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_01_2021_16_53__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_01_2021_10_26__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_01_2021_10_26__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_29_01_2021_14_36__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_29_01_2021_14_36__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_25_01_2021_17_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_25_01_2021_17_24__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_28_01_2021_09_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_28_01_2021_09_53__Default_Changelist_.xml
